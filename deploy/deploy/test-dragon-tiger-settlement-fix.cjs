const axios = require('axios');\n\n// é¾è™æŠ•æ³¨çµç®—ä¿®å¾©æ¸¬è©¦\nasync function testDragonTigerSettlementFix() {\n    console.log('ğŸ‰ğŸ… æ¸¬è©¦é¾è™æŠ•æ³¨çµç®—ä¿®å¾©...\\n');\n    \n    // æ¨¡æ“¬é–‹ççµæœ: [9,5,7,3,6,1,4,10,8,2]\n    // ç¬¬5å=6, ç¬¬6å=1, 6>1 é¾å‹\n    const winResult = [9,5,7,3,6,1,4,10,8,2];\n    \n    // æ¸¬è©¦å„ç¨®é¾è™æŠ•æ³¨æ ¼å¼çš„çµç®—é‚è¼¯\n    const testBets = [\n        {\n            id: 919,\n            username: 'justin111',\n            amount: '100.00',\n            bet_type: 'dragonTiger',\n            bet_value: 'dragon_5_6', // ç¬¬5åvsç¬¬6åï¼Œé¾\n            odds: '1.98',\n            description: 'ç¬¬5åvsç¬¬6å é¾æŠ•æ³¨ (6>1 æ‡‰è©²ä¸­ç)'\n        },\n        {\n            id: 920,\n            username: 'test',\n            amount: '100.00',\n            bet_type: 'dragonTiger', \n            bet_value: 'tiger_5_6', // ç¬¬5åvsç¬¬6åï¼Œè™\n            odds: '1.98',\n            description: 'ç¬¬5åvsç¬¬6å è™æŠ•æ³¨ (6>1 æ‡‰è©²ä¸ä¸­ç)'\n        },\n        {\n            id: 921,\n            username: 'test2',\n            amount: '100.00',\n            bet_type: 'dragonTiger',\n            bet_value: 'dragon_3_8', // ç¬¬3åvsç¬¬8å\n            odds: '1.98', \n            description: 'ç¬¬3åvsç¬¬8å é¾æŠ•æ³¨ (7<10 æ‡‰è©²ä¸ä¸­ç)'\n        },\n        {\n            id: 922,\n            username: 'test3',\n            amount: '100.00',\n            bet_type: 'dragonTiger',\n            bet_value: 'tiger_3_8', // ç¬¬3åvsç¬¬8å\n            odds: '1.98',\n            description: 'ç¬¬3åvsç¬¬8å è™æŠ•æ³¨ (7<10 æ‡‰è©²ä¸­ç)'\n        },\n        {\n            id: 923,\n            username: 'test4', \n            amount: '100.00',\n            bet_type: 'dragonTiger',\n            bet_value: 'dragon', // å‚³çµ±æ ¼å¼å† è»vsäºè»\n            odds: '1.98',\n            description: 'å† è»vsäºè» é¾æŠ•æ³¨ (9>5 æ‡‰è©²ä¸­ç)'\n        }\n    ];\n    \n    console.log('ğŸ“Š é–‹ççµæœ:', winResult);\n    console.log('ç¬¬1å(å† è»):', winResult[0]);\n    console.log('ç¬¬2å(äºè»):', winResult[1]);\n    console.log('ç¬¬3å:', winResult[2]);\n    console.log('ç¬¬5å:', winResult[4]);\n    console.log('ç¬¬6å:', winResult[5]);\n    console.log('ç¬¬8å:', winResult[7]);\n    console.log();\n    \n    // æ¨¡æ“¬çµç®—é‚è¼¯æ¸¬è©¦\n    console.log('ğŸ§® æ¸¬è©¦çµç®—é‚è¼¯:\\n');\n    \n    testBets.forEach(bet => {\n        console.log(`ğŸ“‹ æ¸¬è©¦: ${bet.description}`);\n        console.log(`   æŠ•æ³¨: ${bet.bet_value}, é‡‘é¡: $${bet.amount}`);\n        \n        const winAmount = calculateWinAmountMock(bet, winResult);\n        const isWin = winAmount > 0;\n        \n        console.log(`   çµæœ: ${isWin ? 'âœ… ä¸­ç' : 'âŒ æœªä¸­ç'}, çé‡‘: $${winAmount.toFixed(2)}`);\n        console.log();\n    });\n}\n\n// æ¨¡æ“¬calculateWinAmountå‡½æ•¸\nfunction calculateWinAmountMock(bet, winResult) {\n    const amount = parseFloat(bet.amount);\n    const betOdds = parseFloat(bet.odds);\n    \n    if (bet.bet_type === 'dragonTiger') {\n        let dragonTigerType, pos1, pos2;\n        \n        if (bet.bet_value === 'dragon' || bet.bet_value === 'tiger') {\n            // å‚³çµ±æ ¼å¼ï¼šé»˜èªå† è»vsäºè»\n            dragonTigerType = bet.bet_value;\n            pos1 = 0; // å† è»\n            pos2 = 1; // äºè»\n        } else if (typeof bet.bet_value === 'string' && \n                   (bet.bet_value.startsWith('dragon_') || bet.bet_value.startsWith('tiger_'))) {\n            // è¤‡é›œæ ¼å¼ï¼šdragon_5_6 è¡¨ç¤ºç¬¬5åvsç¬¬6å\n            const parts = bet.bet_value.split('_');\n            if (parts.length === 3) {\n                dragonTigerType = parts[0];\n                pos1 = parseInt(parts[1]) - 1; // è½‰ç‚º0-9ç´¢å¼•\n                pos2 = parseInt(parts[2]) - 1;\n                \n                // é©—è­‰ä½ç½®æœ‰æ•ˆæ€§\n                if (isNaN(pos1) || isNaN(pos2) || pos1 < 0 || pos1 > 9 || pos2 < 0 || pos2 > 9 || pos1 === pos2) {\n                    console.warn(`âš ï¸ é¾è™çµç®—ï¼šç„¡æ•ˆçš„æŠ•æ³¨æ ¼å¼: ${bet.bet_value}`);\n                    return 0;\n                }\n            } else {\n                console.warn(`âš ï¸ é¾è™çµç®—ï¼šç„¡æ³•è§£ææŠ•æ³¨æ ¼å¼: ${bet.bet_value}`);\n                return 0;\n            }\n        } else {\n            console.warn(`âš ï¸ é¾è™çµç®—ï¼šæœªçŸ¥çš„æŠ•æ³¨æ ¼å¼: ${bet.bet_value}`);\n            return 0;\n        }\n        \n        // ç²å–å°æ‡‰ä½ç½®çš„é–‹çè™Ÿç¢¼\n        const pos1Value = winResult[pos1];\n        const pos2Value = winResult[pos2];\n        \n        console.log(`       ğŸ‰ğŸ… é¾è™çµç®—æª¢æŸ¥: ${bet.bet_value}, ç¬¬${pos1+1}å=${pos1Value}, ç¬¬${pos2+1}å=${pos2Value}`);\n        \n        // åˆ¤æ–·é¾è™çµæœ\n        if (dragonTigerType === 'dragon' && pos1Value > pos2Value) {\n            console.log(`       âœ… é¾è™ä¸­ç: é¾å‹ (${pos1Value} > ${pos2Value})`);\n            return Math.round(amount * betOdds * 100) / 100;\n        } else if (dragonTigerType === 'tiger' && pos1Value < pos2Value) {\n            console.log(`       âœ… é¾è™ä¸­ç: è™å‹ (${pos1Value} < ${pos2Value})`);\n            return Math.round(amount * betOdds * 100) / 100;\n        } else {\n            console.log(`       âŒ é¾è™æœªä¸­ç: æŠ•æ³¨${dragonTigerType}, å¯¦éš›${pos1Value > pos2Value ? 'é¾' : pos1Value < pos2Value ? 'è™' : 'å’Œ'}å‹`);\n        }\n    }\n    \n    return 0;\n}\n\n// åŸ·è¡Œæ¸¬è©¦\ntestDragonTigerSettlementFix().catch(console.error); 